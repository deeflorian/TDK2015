\chapter{Complex event processing}
\label{chap:cep}

Chapter
\section{Formal Intro of the Event Automata}
	In our hierarchical runtime verification project, the top level of modelling is done in an event pattern language.
	This pattern language will be compiled to Calendar Event Automata.
	\subsection{Current Formalisms}
		% valami bevezeto a dologhoz?
		The two formalism we checked were the Quantified Event Automaton, and the Calendar Automaton
		\subsubsection{Event Automaton}
			% informal definition
			An Event Automaton is a non-deterministic finite-state automaton whose alphabet consists
			of parametric events and whose transitions may be labelled with guards and assignments
			
			% formal definition
			\begin{dfn}
			Event Automat a. An EventAutomat \textlangle Q,A,\delta, q_0, F \textrangle
			is a tuple where Q is a finite set of states, \mathcal{A} \subseteq
			Event is a finite alphabet, \delta \in (Q \texttimes A \texttimes Guard \texttimes Assign \texttimes Q)
			is a finite set of transitions, q_0 \in Q is an initial state, and F \subseteq Q is a set of final states.
			\end{dfn}
			
		\subsubsection{Calendar Event Automaton}
			% stuff about the calendar
			In discrete event simulation, a calendar (also called event list) is a data structure that
			stores future events and the times at which these events are scheduled to occur
			% stuff about the calender automaton
			
	\subsection{Our Formalism}
		Akkor most tulajdonkeppen mi calendar event automatat implementaltunk :) 
\section{Examples of Event Processing}

	\subsection{File System}
	
	\begin{figure}[h]
	\centering
	\includegraphics[width=0.5\linewidth]{include/figures/chapter_5/fileautomaton}
	\caption{Automaton of the file example}
	\label{fig:cep:fileautomaton}
	\end{figure}

	File system - A file shouldn't be read when it has been opened for Writing, and shouldn't be written, when opened for Reading. 
	A file shouldn't be opened for writing and reading without a close event between the two different opens.
	
	
	\subsection{Mars Rover Tasking - Two phase locking}

\section{Implementation}
	\subsection{Metamodel}
	%image
	\subsection{Executor}
